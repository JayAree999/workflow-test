name: CI

on: [push]

jobs:
  build:
    name: Build
    runs-on: ubuntu-18.04
    strategy:
      matrix:
        node_version: [14]

    steps:
      - uses: actions/checkout@v1
      - name: Use Node.js ${{ matrix.node_version }}
        uses: actions/setup-node@v1
        with:
          node_version: ${{ matrix.node_version }}

  name: Run ESLint
    # You may pin to the exact commit or the version.
    # uses: stefanoeb/eslint-action@0b532bcd98dbed80a59071fa8986fcf1b1715be4
  uses: stefanoeb/eslint-action@1.0.2
    with:
      # Blob of files to lint
      files: # optional, default is .
      
      
  
  
  - name: Prettier Action
  # You may pin to the exact commit or the version.
  # uses: creyD/prettier_action@31355f8eef017f8aeba2e0bc09d8502b13dbbad1
  uses: creyD/prettier_action@v4.3
  with:
    # Commit message, will be ignored if used with same_commit
    commit_message: # optional, default is Prettified Code!
    # Extended commit message, will be ignored if used with same_commit
    commit_description: # optional, default is 
    # Update the current commit instead of creating a new one
    same_commit: # optional
    # Commit options
    commit_options: # optional
    # Git push options
    push_options: # optional
    # File pattern used for `git add`, can't be used with only_changed!
    file_pattern: # optional, default is *
    # Options for the `prettier` command
    prettier_options: # optional, default is --write **/*.js
    # Running the script in dry mode just shows whether there are files that should be prettified or not
    dry: # optional
    # Specific version of prettier (by default just use the latest version)
    prettier_version: # optional
    # Specify a directory to cd into before installing prettier and running it
    working_directory: # optional
    # Only prettify files changed in the last commit, can't be used with file_pattern!
    only_changed: # optional
    # Install Prettier plugins, i.e. `@prettier/plugin-php @prettier/plugin-other`
    prettier_plugins: # optional, default is 
    # GitHub Token or PAT token used to authenticate against a repository
    github_token: # optional, default is ${{ github.token }}
    # Remove the node_modules folder before committing changes
    clean_node_folder: # optional, default is true
    
    
    
    repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
    -   id: trailing-whitespace
    -   id: end-of-file-fixer
    -   id: check-yaml
    -   id: debug-statements
    -   id: double-quote-string-fixer
    -   id: name-tests-test
    -   id: requirements-txt-fixer
-   repo: https://github.com/asottile/setup-cfg-fmt
    rev: v2.2.0
    hooks:
    -   id: setup-cfg-fmt
-   repo: https://github.com/asottile/reorder_python_imports
    rev: v3.9.0
    hooks:
    -   id: reorder-python-imports
        exclude: ^(pre_commit/resources/|testing/resources/python3_hooks_repo/)
        args: [--py38-plus, --add-import, 'from __future__ import annotations']
-   repo: https://github.com/asottile/add-trailing-comma
    rev: v2.4.0
    hooks:
    -   id: add-trailing-comma
        args: [--py36-plus]
-   repo: https://github.com/asottile/pyupgrade
    rev: v3.3.1
    hooks:
    -   id: pyupgrade
        args: [--py38-plus]
-   repo: https://github.com/pre-commit/mirrors-autopep8
    rev: v2.0.2
    hooks:
    -   id: autopep8
-   repo: https://github.com/PyCQA/flake8
    rev: 6.0.0
    hooks:
    -   id: flake8
-   repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.0.1
    hooks:
    -   id: mypy
        additional_dependencies: [types-all]
        exclude: ^testing/resources/
        
        
  - name: Run Playwright tests
  uses: microsoft/playwright-github-action@v1.5.4
  
  
  - name: Vitest Coverage Report
  # You may pin to the exact commit or the version.
  # uses: davelosert/vitest-coverage-report-action@66ad1a974c35c22b2030260758138a1da0c23866
  uses: davelosert/vitest-coverage-report-action@v1.3.2
  with:
    # A github access token with permissions to write to issues. Uses secrets.GITHUB_TOKEN by default.
    github-token: # optional, default is ${{ github.token }}
    # The path to the vite config file. Uses "vite.config.js" by default.
    vite-config-path: # optional, default is vite.config.js
    # The path to the json summary file. Uses "coverage/coverage-summary.json" by default.
    json-summary-path: # optional, default is coverage/coverage-summary.json
    # The path to the json final file. Uses "coverage/coverage-final.json" by default.
    json-final-path: # optional, default is coverage/coverage-final.json
    # Custom working directory
    working-directory: # optional, default is ./
